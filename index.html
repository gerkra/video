<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Видео Чат</title>
    <link href="css/base.css" rel="stylesheet" type="text/css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
<h1>Видео Чат!!!</h1>

<form id="form">
    <div id="message"></div>
    <div contenteditable="true" style="width: 200px;height: 100px;border: 1px solid #000;" id="new"></div>
    <button type="submit">Послать</button>
</form>

<script type="text/javascript">
    var socket = io.connect();

    var Form = document.getElementById('form');
    var area = document.getElementById('message');
    var newMessage = document.getElementById('new');

    Form.addEventListener('submit', function (event) {
        event.preventDefault();
        event.stopPropagation();

        var message = newMessage.innerHTML;

        socket.emit('new_message', message);
    });

    socket.on('submit_message', function (data) {
        var message = document.createElement('p');
        message.innerHTML = data;

        area.appendChild(message);
    });
</script>
</body>
</html>